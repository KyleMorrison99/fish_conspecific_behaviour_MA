---
title: "The impacts of pesticide exposure on fish conspecific behavioural interactions: systematic review and meta-analysis - data extraction"
author: "Kyle Morrison"
date: "2023-11-23"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
pacman::p_load(tidyverse,
              here)
```


```{r}
rm(list = ls())
#install.packages("devtools")
# devtools::install_github("EIvimeyCook/ShinyDigitise")

library(shinyDigitise)
library(metaDigitise)

```

Opening Shiny digitise
```{r}
shinyDigitise(dir = "C:/Users/khtmo/OneDrive - UNSW/University/PhD_Chapters/4_fish_soc_ma/fish_conspecific_behaviour_MA/data_extraction/data_extraction_figures")


data <- metaDigitise(dir = "C:/Users/khtmo/OneDrive - UNSW/University/PhD_Chapters/4_fish_soc_ma/fish_conspecific_behaviour_MA/data_extraction/data_extraction_figures")

data

write.csv(data,file="fish_soc_ma_shinydigitise.csv")


```


Mean and SD for faria et al., 2021 figure1ca
```{r}
faria_2021 <- read.csv(here("data_extraction", "data_extraction_figures", "faria_2021_fig1ca.csv"))

# Calculate mean for each variable in Group
faria_2021_mean <- tapply(faria_2021$Average.interfish.distance, faria_2021$Group, mean, na.rm = TRUE)

# Calculate standard deviation for each variable in Group
faria_2021_sd <- tapply(faria_2021$Average.interfish.distance, faria_2021$Group, sd, na.rm = TRUE)

# Define a function to calculate SE
calculate_se <- function(x) {
  sqrt(var(x, na.rm = TRUE) / length(x))
}

# Calculate standard error for each variable in Group
faria_2021_se <- tapply(faria_2021$Average.interfish.distance, faria_2021$Group, function(x) calculate_se(x) / sqrt(length(x)))
 
 
faria_2021_sample_size <- tapply(faria_2021$Average.interfish.distance, faria_2021$Group, length)

# Combine the results into a data frame
faria_2021_summary_stats <- data.frame(Group= names(faria_2021_mean),
                                       Mean = faria_2021_mean,
                             SD = faria_2021_sd,
                             SE = faria_2021_se,
                             Sample = faria_2021_sample_size)

# write.csv(faria_2021_summary_stats, file.path(here("data_extraction", "data_extraction_figures"), "faria_2021_summary_stats.csv"), row.names = FALSE)

```

